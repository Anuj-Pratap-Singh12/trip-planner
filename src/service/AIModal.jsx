import { GoogleGenerativeAI } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

  export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image URL, geo coordinates, rating, descriptions, and suggest itinerary with placeName, Place Details, Place Image URL, Geo Coordinates, Ticket Pricing, Time to travel each of the locations for 3 days with each day plan with best time to visit in JSON format."},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's a JSON travel plan for a budget-friendly 3-day trip to Las Vegas for a couple, including hotel options and a daily itinerary:\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Trip for Couples\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50 - $100 per night\",\n      \"hotelImageURL\": \"https://example.com/circus_circus.jpg\",\n       \"geoCoordinates\": {\n          \"latitude\": 36.1415,\n          \"longitude\": -115.1693\n        },\n      \"rating\": 3.8,\n      \"description\": \"A classic Vegas experience with a carnival atmosphere. Offers budget-friendly rooms and family-friendly attractions.\",\n         \"amenities\": [\"Free Parking\", \"Pool\", \"Casino\", \"On-site Restaurants\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$60 - $120 per night\",\n        \"hotelImageURL\": \"https://example.com/excalibur.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.0987,\n          \"longitude\": -115.1726\n        },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel with affordable rates and several dining and entertainment options.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Shows\", \"On-site Restaurants\"]\n    },\n       {\n      \"hotelName\": \"The Strat Hotel, Casino & SkyPod\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"$55 - $110 per night\",\n        \"hotelImageURL\": \"https://example.com/strat.jpg\",\n         \"geoCoordinates\": {\n          \"latitude\": 36.1511,\n          \"longitude\": -115.1558\n        },\n      \"rating\": 4.2,\n      \"description\": \"Offers breathtaking views from the SkyPod. Budget-friendly rooms and exciting attractions.\",\n      \"amenities\": [\"SkyPod Access\", \"Casino\", \"Pool\", \"On-site Restaurants\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip & Free Attractions\",\n      \"bestTimeToVisit\": \"Morning and Late Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning displays of flowers and plants that change seasonally, all for free!\",\n          \"placeImageURL\": \"https://example.com/bellagio_garden.jpg\",\n             \"geoCoordinates\": {\n              \"latitude\": 36.1129,\n              \"longitude\": -115.1742\n            },\n          \"ticketPricing\": \"Free\",\n             \"timeToTravel\": \"Walking\"\n        },\n         {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Spectacular water show with lights and music, a must-see free attraction.\",\n          \"placeImageURL\": \"https://example.com/bellagio_fountains.jpg\",\n             \"geoCoordinates\": {\n              \"latitude\": 36.1127,\n              \"longitude\": -115.1741\n            },\n          \"ticketPricing\": \"Free\",\n             \"timeToTravel\": \"Walking (Located near Bellagio Garden)\"\n         },\n         {\n            \"placeName\": \"The LINQ Promenade\",\n             \"placeDetails\":\"Outdoor shopping, dining, and entertainment district. Explore the shops and enjoy the vibrant atmosphere.\",\n             \"placeImageURL\": \"https://example.com/linq_promenade.jpg\",\n                 \"geoCoordinates\": {\n                    \"latitude\": 36.1170,\n                    \"longitude\": -115.1704\n                     },\n            \"ticketPricing\": \"Free to walk around, costs for specific attractions.\",\n             \"timeToTravel\": \"Walking from Bellagio\"\n            },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Downtown Las Vegasâ€™ pedestrian mall with a light and sound show on a giant canopy screen.\",\n          \"placeImageURL\": \"https://example.com/fremont_street.jpg\",\n            \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1410\n          },\n          \"ticketPricing\": \"Free\",\n             \"timeToTravel\": \"15-20 minutes drive/ride from LINQ Promenade\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Affordable Entertainment & Sightseeing\",\n         \"bestTimeToVisit\": \"Late Morning and Afternoon\",\n      \"places\": [\n           {\n            \"placeName\": \"High Roller Observation Wheel (Optional)\",\n            \"placeDetails\": \"Take a ride on one of the world's tallest observation wheels for breathtaking views.\",\n             \"placeImageURL\": \"https://example.com/high_roller.jpg\",\n                \"geoCoordinates\": {\n                \"latitude\": 36.1164,\n                \"longitude\": -115.1697\n                },\n                \"ticketPricing\": \"$25-$30 per person (can find cheaper deals online)\",\n                 \"timeToTravel\": \"Located within the LINQ Promenade (Walking Distance)\"\n            },\n        {\n          \"placeName\": \"M&M's World\",\n           \"placeDetails\": \"A multi-story store with M&M's themed merchandise and colorful displays. Fun to browse and take pictures.\",\n          \"placeImageURL\": \"https://example.com/mms_world.jpg\",\n           \"geoCoordinates\": {\n                \"latitude\": 36.1061,\n                \"longitude\": -115.1702\n                },\n          \"ticketPricing\": \"Free to enter, cost for purchases\",\n           \"timeToTravel\": \"10-15 minute walk/ride from LINQ Promenade\"\n\n        },\n        {\n          \"placeName\": \"Coca-Cola Store\",\n          \"placeDetails\": \"Located near M&M's World, offers a variety of Coca-Cola products and merchandise.\",\n          \"placeImageURL\": \"https://example.com/coca_cola_store.jpg\",\n             \"geoCoordinates\": {\n                \"latitude\": 36.1063,\n                \"longitude\": -115.1704\n            },\n          \"ticketPricing\": \"Free to enter, cost for purchases\",\n            \"timeToTravel\": \"Walking (Located Near M&M's World)\"\n        },\n\n        {\n         \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n            \"placeDetails\": \"Take a picture at this iconic Las Vegas landmark.\",\n            \"placeImageURL\":\"https://example.com/welcome_sign.jpg\",\n              \"geoCoordinates\":{\n               \"latitude\": 36.0827,\n               \"longitude\": -115.1726\n                 },\n               \"ticketPricing\": \"Free\",\n                 \"timeToTravel\": \"10-15 minutes drive/ride from Coca-Cola store\"\n             }\n      ]\n    },\n    \"day3\": {\n     \"theme\": \"Arts, Culture, & Departure\",\n       \"bestTimeToVisit\": \"Morning\",\n      \"places\": [\n        {\n          \"placeName\": \"The Arts District\",\n          \"placeDetails\": \"Explore colorful murals and art galleries. Great for a leisurely stroll and unique photo opportunities.\",\n          \"placeImageURL\": \"https://example.com/arts_district.jpg\",\n            \"geoCoordinates\": {\n                \"latitude\": 36.1524,\n               \"longitude\": -115.1483\n                  },\n          \"ticketPricing\": \"Free\",\n            \"timeToTravel\": \"10-15 minute drive/ride from the Welcome Sign\"\n        },\n      {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"An open-air shopping center built from shipping containers with unique shops, art installations, and dining options.\",\n           \"placeImageURL\": \"https://example.com/container_park.jpg\",\n           \"geoCoordinates\": {\n           \"latitude\": 36.1707,\n           \"longitude\": -115.1389\n            },\n          \"ticketPricing\":\"Free to walk around, cost for specific shops\",\n            \"timeToTravel\": \"5-10 minute drive/ride from Arts District\"\n\n      },\n       {\n         \"placeName\": \"Departure\",\n           \"placeDetails\":\"Head to the airport or onward destination.\",\n            \"placeImageURL\": null,\n             \"geoCoordinates\": null,\n               \"ticketPricing\": null,\n               \"timeToTravel\": null\n         }\n      ]\n    }\n  },\n   \"notes\": \"This plan focuses on free attractions and budget-friendly activities. Consider using public transportation or ride-sharing services to save on transportation costs. Be sure to check for free events and specials happening during your visit. Consider buying food and snacks from local grocery shops to save cost on foods in the strip. Book Hotels in advance for good deals.\"\n}\n```\n\n**Explanation:**\n\n*   **`tripName`, `duration`, `budget`, `travelers`:** Basic information about the trip.\n*   **`hotels`:** A list of hotel options with detailed information including the amenities.\n*   **`itinerary`:**\n    *   Organized by day (`day1`, `day2`, `day3`).\n    *   Each day includes a `theme` (what that day will focus on) and a `bestTimeToVisit` to make the most of the day.\n    *   `places` is an array of location within each day that contains the name of the place (`placeName`), a brief description (`placeDetails`), a url for the place image(`placeImageURL`), geo coordinates (`geoCoordinates`), the cost of entry (`ticketPricing`), and the estimated travel time between different locations using ride or walk.\n*   **`notes`:** Important tips for saving money and maximizing your trip.\n\n**Key Budget Tips:**\n\n*   **Hotel Choices:** The suggested hotels are generally more affordable than those on the central Strip.\n*   **Free Attractions:** Focus on free or low-cost activities.\n*   **Transportation:** Walk or use public transportation where possible.\n*   **Food:** Balance dining with snacks and meals from budget options.\n*   **Deals:** Check for online deals on attractions and activities before your visit.\n\n**To Use This Plan:**\n\n1.  **Replace Example URLs:** Be sure to replace `\"https://example.com/...\"` with actual image URLs.\n2.  **Customize:** Feel free to modify this plan to fit your personal interests and preferences.\n3.  **Book Ahead:** It's best to book your hotel in advance to secure the best rates.\n4.  **Check for Deals:** Before you travel, check for special offers or discounts for attractions and activities.\n\nRemember that pricing may vary based on the time of the year and weekday vs. weekend.\n\nI hope this comprehensive plan helps you enjoy a wonderful and budget-friendly trip to Las Vegas!\n"},
        ],
      },
    ],
  });